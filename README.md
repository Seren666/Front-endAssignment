# CollaBoard

<div align="center">

**ğŸ–Œï¸ å¤šäººå®æ—¶åä½œç™½æ¿**

</div>

<div align="center">

![License](https://img.shields.io/badge/license-MIT-brightgreen)
![Node.js](https://img.shields.io/badge/Node.js-18.x-brightgreen)
![Vite](https://img.shields.io/badge/Vite-7.2.6-blue)
![React](https://img.shields.io/badge/React-18.x-blue)

</div>

æ”¯æŒè‡ªç”±ç»˜åˆ¶ã€å›¾å½¢ç»˜åˆ¶ã€æ’¤é”€/é‡åšã€å¤šäººå…‰æ ‡å’Œå¯¼å‡ºå›¾ç‰‡ç­‰åŠŸèƒ½ã€‚

---

## ç›®å½•

- [CollaBoard](#collaboard)

  - [ç›®å½•](#ç›®å½•)
  - [ç¤ºä¾‹](#ç¤ºä¾‹)
  - [ä¸»è¦åŠŸèƒ½](#ä¸»è¦åŠŸèƒ½)
  - [æ ¸å¿ƒåŸç†](#æ ¸å¿ƒåŸç†)

    - [æ¦‚è¿°](#æ¦‚è¿°)
    - [åè®®ä¸äº‹ä»¶å®šä¹‰](#åè®®ä¸äº‹ä»¶å®šä¹‰)
    - [å¼€å‘æç¤º](#å¼€å‘æç¤º)
  - [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)

    - [å®‰è£…ä¾èµ–](#å®‰è£…ä¾èµ–)
    - [å¯åŠ¨å¼€å‘ç¯å¢ƒ](#å¯åŠ¨å¼€å‘ç¯å¢ƒ)
    - [å‰åç«¯åŒæ—¶å¯åŠ¨](#å‰åç«¯åŒæ—¶å¯åŠ¨)
  - [è®¿é—®æ–¹å¼](#è®¿é—®æ–¹å¼)
  - [é¡¹ç›®ç›®å½•è¯´æ˜](#é¡¹ç›®ç›®å½•è¯´æ˜)

---

## ç¤ºä¾‹ ğŸ¬

<div align="center" style="border:1px dashed #ccc; padding:16px; margin-bottom:16px;">
ã€åœ¨è¿™é‡Œæ”¾ä½¿ç”¨æ¼”ç¤ºæˆªå›¾æˆ– GIF/JPGã€‘
</div>

---

## ä¸»è¦åŠŸèƒ½ âœ¨

* ğŸ– **è‡ªç”±ç»˜åˆ¶**ï¼šå¤šç§ç”»ç¬”ï¼ˆé“…ç¬”ã€é©¬å…‹ç¬”ã€æ¿€å…‰ç¬”ã€æ©¡çš®æ“¦ï¼‰
* ğŸ”· **å›¾å½¢ç»˜åˆ¶**ï¼šçŸ©å½¢ã€åœ†å½¢ã€ä¸‰è§’å½¢ã€å¤šè¾¹å½¢ã€ç®­å¤´ç­‰
* ğŸ”„ **æ’¤é”€ / é‡åš**ï¼šè½¯åˆ é™¤ + per-user undo æ ˆ
* ğŸ‘¥ **å®æ—¶åä½œ**ï¼šå¤šäººåŒæ—¶åœ¨çº¿ç»˜åˆ¶ä¸å…‰æ ‡åŒæ­¥
* ğŸ  **åˆ›å»º/åŠ å…¥æˆ¿é—´**ï¼šæ”¯æŒæˆ¿é—´å· + å¯†ç 
* ğŸ“¸ **å¯¼å‡º PNG**ï¼šå°†ä¸»ç”»å¸ƒå¯¼å‡ºä¸ºå›¾ç‰‡
* âš¡ **é«˜æ¸…ç”»å¸ƒæ¸²æŸ“**ï¼šæ”¯æŒé«˜ DPI ä¼˜åŒ– canvas

---

## æ ¸å¿ƒåŸç† ğŸ› ï¸

### æ¦‚è¿°

CollaBoard ä½¿ç”¨ **React + Vite** æ„å»ºå‰ç«¯ï¼Œ**Node.js + Express + Socket.io** æ„å»ºåç«¯ï¼Œé€šè¿‡ WebSocket å®ç°å¤šäººåä½œã€‚

* å®¢æˆ·ç«¯è´Ÿè´£ï¼šç”¨æˆ·äº¤äº’ã€ç”»å¸ƒæ¸²æŸ“ã€å…‰æ ‡åŒæ­¥
* æœåŠ¡ç«¯è´Ÿè´£ï¼šæˆ¿é—´ç®¡ç†ã€çŠ¶æ€ç»´æŠ¤ã€æ¶ˆæ¯å¹¿æ’­

æ¯æ¬¡ç”¨æˆ·æ“ä½œéƒ½ä¼šç”Ÿæˆç»Ÿä¸€æ•°æ®ç»“æ„ `DrawAction`ï¼Œå‰ç«¯å…ˆæœ¬åœ°æ¸²æŸ“ï¼Œæ“ä½œç»“æŸåå‘é€ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯æ›´æ–°æˆ¿é—´çŠ¶æ€å¹¶å¹¿æ’­ç»™æ‰€æœ‰å®¢æˆ·ç«¯ï¼Œå®ç°ä½å»¶è¿Ÿå®æ—¶åä½œã€‚

---

### åè®®ä¸äº‹ä»¶å®šä¹‰ï¼ˆSocketï¼‰

#### ğŸ“¨ å®¢æˆ·ç«¯ â†’ æœåŠ¡ç«¯

| äº‹ä»¶å             | Payload                        | è¯´æ˜     |
| --------------- | ------------------------------ | ------ |
| `room:join`     | `{ roomId, userName }`         | åŠ å…¥æˆ¿é—´   |
| `draw:commit`   | `{ roomId, action }`           | æäº¤ç»˜åˆ¶åŠ¨ä½œ |
| `action:undo`   | `{ roomId, userId }`           | æ’¤é”€æ“ä½œ   |
| `action:redo`   | `{ roomId, userId }`           | é‡åšæ“ä½œ   |
| `cursor:update` | `{ roomId, position, pageId }` | å…‰æ ‡æ›´æ–°   |
| `board:clear`   | `{ roomId, pageId }`           | æ¸…ç©ºç”»å¸ƒ   |

#### ğŸ“¤ æœåŠ¡ç«¯ â†’ å®¢æˆ·ç«¯

| äº‹ä»¶å                     | Payload                                | è¯´æ˜      |
| ----------------------- | -------------------------------------- | ------- |
| `room:joined`           | `{ roomId, self, state }`              | åŠ å…¥æˆåŠŸ    |
| `draw:created`          | `{ roomId, action }`                   | å¹¿æ’­æ–°åŠ¨ä½œ   |
| `action:updatedDeleted` | `{ roomId, actionId, isDeleted }`      | æ’¤é”€/æ¢å¤æ›´æ–° |
| `cursor:updated`        | `{ roomId, userId, position, pageId }` | å…‰æ ‡æ›´æ–°    |
| `board:cleared`         | `{ roomId, pageId }`                   | æ¸…å±å¹¿æ’­    |
| `room:state-sync`       | `{ roomId, state }`                    | å…¨é‡åŒæ­¥    |

---

### å¼€å‘æç¤º ğŸ’¡

* åæ ‡ **å½’ä¸€åŒ– (0~1)**ï¼Œé€‚é…ä¸åŒå±å¹•
* æ’¤é”€ç”¨ **è½¯åˆ é™¤** (`isDeleted`) é¿å…å†²çª
* å…‰æ ‡æ›´æ–° **èŠ‚æµ 50ms**
* é«˜ DPI è®¾å¤‡éœ€ç”¨ `ctx.scale(dpr, dpr)` é¿å…æ¨¡ç³Š

---

## å¿«é€Ÿå¼€å§‹ ğŸš€

### å®‰è£…ä¾èµ–

```bash
npm run install:all
```

æˆ–æ‰‹åŠ¨ï¼š

```bash
cd client
npm install
cd ../server
npm install
```

---

### å¯åŠ¨å¼€å‘ç¯å¢ƒ

**å‰ç«¯ï¼ˆClientï¼‰**ï¼š

```bash
cd client
npm run dev
```

ç»ˆç«¯æ˜¾ç¤ºï¼š

```
âœ  Local:   http://localhost:5173/
âœ  Network: http://<ä½ çš„å±€åŸŸç½‘IP>:5173/
```

**åç«¯ï¼ˆServerï¼‰**ï¼š

```bash
cd server
npm run dev
```

ç»ˆç«¯æ˜¾ç¤ºï¼š

```
ğŸš€ åç«¯æœåŠ¡å·²å¯åŠ¨!
---------------------------
æœ¬æœºç‹¬äº«: http://localhost:3000
å¤šäººè”æœº: http://<ä½ çš„å±€åŸŸç½‘IP>:3000 
---------------------------
```

---

### å‰åç«¯åŒæ—¶å¯åŠ¨

å®‰è£… concurrentlyï¼š

```bash
npm install -D concurrently
```

æ ¹ç›®å½• `package.json` æ·»åŠ ï¼š

```json
"scripts": {
  "dev:client": "cd client && npm run dev",
  "dev:server": "cd server && npm run dev",
  "start": "concurrently \"npm:dev:server\" \"npm:dev:client\""
}
```

è¿è¡Œï¼š

```bash
npm run start
```

---

## è®¿é—®æ–¹å¼ ğŸŒ

* **æœ¬åœ°è®¿é—®**ï¼š`http://localhost:5173/` (å‰ç«¯) / `http://localhost:3000` (åç«¯)
* **å±€åŸŸç½‘è®¿é—®**ï¼šç»ˆç«¯æ˜¾ç¤ºçš„ `Network` åœ°å€ï¼Œä¾‹å¦‚ `http://10.136.85.139:5173/` / `http://10.136.85.139:3000`

---

## é¡¹ç›®ç›®å½•è¯´æ˜ ğŸ“

```
/
â”œâ”€â”€ client/       # å‰ç«¯ React + Vite
â”œâ”€â”€ server/       # åç«¯ Express + Socket.io
â”œâ”€â”€ README.md
```

---
